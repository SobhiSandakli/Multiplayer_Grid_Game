<div class="game-page">
    <div class="item-1">
        <div class="conteneur-1">
            <h3>{{ gameName }}</h3>
            <div class="label">Taille de la carte: {{ gameSize }}</div>
            <div class="label">Nombre de joueurs actuels : {{ playerCount }}</div>
            <div class="label">Joueur actif : test</div>
        </div>
        <div class="conteneur-2">
            <h3>{{ sessionService.playerName }}</h3>
            <img *ngIf="sessionService.playerAvatar" [src]="sessionService.playerAvatar" alt="Avatar du joueur" class="player-avatar" />
            <div class="label">Points de vie restants : {{ sessionService.playerAttributes?.life?.currentValue }}</div>
            <div class="label">Rapidité : {{ sessionService.playerAttributes?.speed?.currentValue }}</div>
            <div class="label">Attaque : {{ sessionService.playerAttributes?.attack?.dice }}</div>
            <div class="label">Défense : {{ sessionService.playerAttributes?.defence?.dice }}</div>
            <div class="label">Action restante : {{ action }}</div>
            <div class="label">Points de mouvements restants : {{ movementPoints }}</div>
        </div>
        
        <div class="control-button">
            <p *ngIf="isActive" class="actionsDescription">
                Vous pouvez choisir de cliquer sur une porte pour l'ouvrir ou la fermer OU sur un adversaire pour déclencher un combat.
            </p>
            <button id="action" [ngClass]="{ active: isActive }" (click)="toggleActive()">Action</button>
            <button id="abandoned" (click)="leaveSession()">Abandonner</button>
            <app-confirmation-popup
                *ngIf="leaveSessionPopupVisible"
                [message]="leaveSessionMessage"
                (confirm)="confirmLeaveSession()"
                (cancel)="cancelLeaveSession()"
            >
            </app-confirmation-popup>
        </div>
    </div>
    <div class="item-2">
        <app-game-grid *ngIf="sessionCode !== ''" [sessionCode]="sessionCode"></app-game-grid>
        <div class="item-3">
            <div class="conteneur-3">
                <app-timer class="timer" [putTimer]="putTimer"></app-timer>
                <div class="end-button">
                    <button id="end" (click)="endTurn()">Finir son tour</button>
                </div>
            </div>

            <div class="inventory">
                <h3 id="inventory">Inventaire</h3>
                <div class="object-container">
                    <div class="object">
                        <img />
                    </div>
                    <div class="object">
                        <img />
                    </div>
                </div>
            </div>
            <div class="players-container">
                <div class="header" (click)="toggleExpand()">
                    <h3 class="players">Joueurs</h3>
                    <fa-icon class="icon" [icon]="faChevronDown" *ngIf="!isExpanded"></fa-icon>
                    <fa-icon class="icon" [icon]="faChevronUp" *ngIf="isExpanded"></fa-icon>
                </div>
                <div class="players-list" [class.expanded]="isExpanded">
                    <p
                        class="player"
                        *ngFor="let player of players"
                        [class.crossed-out]="player.hasLeft"
                    >
                        {{ player.name }}
                    </p>
                </div>
            </div>
            <div [class.grayed-out]="isInvolvedInFight" class="fight-container">
                <h3>Combat</h3>
                <app-dice></app-dice>
                <button id="escape">Évasion ({{ escapeAttempt }} tentavives)</button>
            </div>
        </div>
    </div>
</div>
<footer class="footer">
    <app-chat *ngIf="playerName" [room]="sessionService.sessionCode" [sender]="playerName" [isWaitingPage]="false"></app-chat>
</footer>
